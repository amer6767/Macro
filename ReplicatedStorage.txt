-- Axiora Modern GUI - Luau Conversion
-- Converted from React to Roblox GUI with identical design

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- State variables
local activeTab = "control"
local isRecording = false
local isPlaying = false
local nodeCount = 247

-- Color utilities
local function rgb(r, g, b)
	return Color3.fromRGB(r, g, b)
end

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AxioraGUI"
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
screenGui.Parent = playerGui

-- Main Frame (equivalent to the outer div)
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(1, 0, 1, 0)
mainFrame.Position = UDim2.new(0, 0, 0, 0)
mainFrame.BackgroundTransparency = 1 -- FIXED: Made transparent to remove black border
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

-- Container (max-width equivalent) - 400x310 (reduced from 350 since header removed)
local container = Instance.new("Frame")
container.Name = "Container"
container.Size = UDim2.new(0, 400, 0, 310)
container.Position = UDim2.new(0.5, 0, 0.5, 0)
container.AnchorPoint = Vector2.new(0.5, 0.5)
container.BackgroundColor3 = rgb(2, 6, 23) -- slate-950
container.BorderSizePixel = 0
container.Parent = mainFrame

-- Gradient background for container
local containerGradient = Instance.new("UIGradient")
containerGradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, rgb(2, 6, 23)), -- slate-950
	ColorSequenceKeypoint.new(0.5, rgb(59, 7, 100)), -- purple-950
	ColorSequenceKeypoint.new(1, rgb(2, 6, 23)) -- slate-950
}
containerGradient.Rotation = 135
containerGradient.Parent = container

local containerCorner = Instance.new("UICorner")
containerCorner.CornerRadius = UDim.new(0, 16)
containerCorner.Parent = container

-- Header (completely hidden)
local header = Instance.new("Frame")
header.Name = "Header"
header.Size = UDim2.new(0, 180, 0, 35)
header.Position = UDim2.new(0.5, 0, 0, 5)
header.AnchorPoint = Vector2.new(0.5, 0)
header.BackgroundColor3 = rgb(88, 28, 135) -- purple-600/20 approximation
header.BackgroundTransparency = 1 -- Fully transparent
header.BorderSizePixel = 0
header.Visible = false -- Hidden
header.Parent = container

local headerCorner = Instance.new("UICorner")
headerCorner.CornerRadius = UDim.new(0, 8)
headerCorner.Parent = header

local headerStroke = Instance.new("UIStroke")
headerStroke.Color = rgb(168, 85, 247) -- purple-500/30
headerStroke.Transparency = 0.7
headerStroke.Thickness = 1
headerStroke.Parent = header

-- Pulse indicator (hidden)
local pulseIndicator = Instance.new("Frame")
pulseIndicator.Name = "PulseIndicator"
pulseIndicator.Size = UDim2.new(0, 6, 0, 6)
pulseIndicator.Position = UDim2.new(0, 10, 0.5, 0)
pulseIndicator.AnchorPoint = Vector2.new(0, 0.5)
pulseIndicator.BackgroundColor3 = rgb(34, 211, 238) -- cyan-400
pulseIndicator.BorderSizePixel = 0
pulseIndicator.Visible = false
pulseIndicator.Parent = header

local pulseCorner = Instance.new("UICorner")
pulseCorner.CornerRadius = UDim.new(1, 0)
pulseCorner.Parent = pulseIndicator

-- Pulse animation
local pulseTween = TweenService:Create(pulseIndicator, TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true), {BackgroundTransparency = 0.5})
pulseTween:Play()

-- Title (hidden)
local title = Instance.new("TextLabel")
title.Name = "Title"
title.Size = UDim2.new(0, 120, 1, 0)
title.Position = UDim2.new(0, 25, 0, 0)
title.BackgroundTransparency = 1
title.Text = "AXIORA"
title.Font = Enum.Font.GothamBold
title.TextSize = 14
title.TextColor3 = rgb(167, 139, 250) -- purple-400
title.Visible = false
title.Parent = header

-- Version badge (hidden)
local versionBadge = Instance.new("TextLabel")
versionBadge.Name = "VersionBadge"
versionBadge.Size = UDim2.new(0, 30, 0, 14)
versionBadge.Position = UDim2.new(0, 145, 0.5, 0)
versionBadge.AnchorPoint = Vector2.new(0, 0.5)
versionBadge.BackgroundColor3 = rgb(88, 28, 135) -- purple-900/30
versionBadge.BackgroundTransparency = 1 -- Hidden
versionBadge.Text = "v6.0"
versionBadge.Font = Enum.Font.Code
versionBadge.TextSize = 8
versionBadge.TextColor3 = rgb(216, 180, 254) -- purple-300/60
versionBadge.TextTransparency = 1 -- Hidden
versionBadge.BorderSizePixel = 0
versionBadge.Visible = false -- Hidden
versionBadge.Parent = header

local versionCorner = Instance.new("UICorner")
versionCorner.CornerRadius = UDim.new(0, 4)
versionCorner.Parent = versionBadge

-- Status Bar
local statusBar = Instance.new("Frame")
statusBar.Name = "StatusBar"
statusBar.Size = UDim2.new(1, -10, 0, 32)
statusBar.Position = UDim2.new(0, 5, 0, 5) -- Moved up from 45
statusBar.BackgroundColor3 = rgb(15, 23, 42) -- slate-900/40
statusBar.BackgroundTransparency = 0.4 -- Less transparent to show purple gradient
statusBar.BorderSizePixel = 0
statusBar.Parent = container

local statusCorner = Instance.new("UICorner")
statusCorner.CornerRadius = UDim.new(0, 8)
statusCorner.Parent = statusBar

local statusStroke = Instance.new("UIStroke")
statusStroke.Color = rgb(51, 65, 85) -- slate-700/50
statusStroke.Transparency = 0.5
statusStroke.Thickness = 1
statusStroke.Parent = statusBar

-- Status indicator
local statusIndicator = Instance.new("Frame")
statusIndicator.Name = "StatusIndicator"
statusIndicator.Size = UDim2.new(0, 65, 0, 22)
statusIndicator.Position = UDim2.new(0, 5, 0.5, 0)
statusIndicator.AnchorPoint = Vector2.new(0, 0.5)
statusIndicator.BackgroundColor3 = rgb(51, 65, 85) -- slate-700/30
statusIndicator.BackgroundTransparency = 0.7
statusIndicator.BorderSizePixel = 0
statusIndicator.Parent = statusBar

local statusIndCorner = Instance.new("UICorner")
statusIndCorner.CornerRadius = UDim.new(0, 6)
statusIndCorner.Parent = statusIndicator

local statusIndStroke = Instance.new("UIStroke")
statusIndStroke.Color = rgb(71, 85, 105) -- slate-600/50
statusIndStroke.Transparency = 0.5
statusIndStroke.Thickness = 1
statusIndStroke.Parent = statusIndicator

-- Status dot
local statusDot = Instance.new("Frame")
statusDot.Name = "StatusDot"
statusDot.Size = UDim2.new(0, 5, 0, 5)
statusDot.Position = UDim2.new(0, 5, 0.5, 0)
statusDot.AnchorPoint = Vector2.new(0, 0.5)
statusDot.BackgroundColor3 = rgb(148, 163, 184) -- slate-400
statusDot.BorderSizePixel = 0
statusDot.Parent = statusIndicator

local statusDotCorner = Instance.new("UICorner")
statusDotCorner.CornerRadius = UDim.new(1, 0)
statusDotCorner.Parent = statusDot

-- Status text
local statusText = Instance.new("TextLabel")
statusText.Name = "StatusText"
statusText.Size = UDim2.new(1, -15, 1, 0)
statusText.Position = UDim2.new(0, 15, 0, 0)
statusText.BackgroundTransparency = 1
statusText.Text = "IDLE"
statusText.Font = Enum.Font.GothamBold
statusText.TextSize = 8
statusText.TextColor3 = rgb(226, 232, 240) -- slate-200
statusText.TextXAlignment = Enum.TextXAlignment.Left
statusText.Parent = statusIndicator

-- Node count
local nodeCountLabel = Instance.new("TextLabel")
nodeCountLabel.Name = "NodeCount"
nodeCountLabel.Size = UDim2.new(0, 60, 1, 0)
nodeCountLabel.Position = UDim2.new(0, 75, 0, 0)
nodeCountLabel.BackgroundTransparency = 1
nodeCountLabel.Text = nodeCount .. " nodes"
nodeCountLabel.Font = Enum.Font.Code
nodeCountLabel.TextSize = 7
nodeCountLabel.TextColor3 = rgb(203, 213, 225) -- slate-300
nodeCountLabel.TextXAlignment = Enum.TextXAlignment.Left
nodeCountLabel.Parent = statusBar

-- Executor badges
local executorBadge = Instance.new("TextLabel")
executorBadge.Name = "ExecutorBadge"
executorBadge.Size = UDim2.new(0, 75, 0, 18)
executorBadge.Position = UDim2.new(1, -140, 0.5, 0)
executorBadge.AnchorPoint = Vector2.new(0, 0.5)
executorBadge.BackgroundColor3 = rgb(51, 65, 85) -- slate-700/30
executorBadge.BackgroundTransparency = 0.7
executorBadge.Text = "Delta Executor"
executorBadge.Font = Enum.Font.Code
executorBadge.TextSize = 7
executorBadge.TextColor3 = rgb(34, 211, 238) -- cyan-400
executorBadge.BorderSizePixel = 0
executorBadge.Parent = statusBar

local execCorner = Instance.new("UICorner")
execCorner.CornerRadius = UDim.new(0, 4)
execCorner.Parent = executorBadge

local readyBadge = Instance.new("TextLabel")
readyBadge.Name = "ReadyBadge"
readyBadge.Size = UDim2.new(0, 50, 0, 18)
readyBadge.Position = UDim2.new(1, -55, 0.5, 0)
readyBadge.AnchorPoint = Vector2.new(0, 0.5)
readyBadge.BackgroundColor3 = rgb(34, 197, 94) -- green-500/10
readyBadge.BackgroundTransparency = 0.9
readyBadge.Text = "READY"
readyBadge.Font = Enum.Font.GothamBold
readyBadge.TextSize = 7
readyBadge.TextColor3 = rgb(74, 222, 128) -- green-400
readyBadge.BorderSizePixel = 0
readyBadge.Parent = statusBar

local readyCorner = Instance.new("UICorner")
readyCorner.CornerRadius = UDim.new(0, 4)
readyCorner.Parent = readyBadge

local readyStroke = Instance.new("UIStroke")
readyStroke.Color = rgb(34, 197, 94) -- green-500/30
readyStroke.Transparency = 0.7
readyStroke.Thickness = 1
readyStroke.Parent = readyBadge

-- Sidebar
local sidebar = Instance.new("Frame")
sidebar.Name = "Sidebar"
sidebar.Size = UDim2.new(0, 90, 0, 258) -- Increased to fit new container
sidebar.Position = UDim2.new(0, 5, 0, 42) -- Moved up from 82
sidebar.BackgroundColor3 = rgb(15, 23, 42) -- slate-900/40
sidebar.BackgroundTransparency = 0.4 -- Less transparent to show purple gradient
sidebar.BorderSizePixel = 0
sidebar.Parent = container

local sidebarCorner = Instance.new("UICorner")
sidebarCorner.CornerRadius = UDim.new(0, 8)
sidebarCorner.Parent = sidebar

local sidebarStroke = Instance.new("UIStroke")
sidebarStroke.Color = rgb(51, 65, 85) -- slate-700/50
sidebarStroke.Transparency = 0.5
sidebarStroke.Thickness = 1
sidebarStroke.Parent = sidebar

-- Forward declare mainContent so nav buttons can reference it
local mainContent

-- Navigation buttons
local navButtons = {
	{id = "control", label = "Control", yPos = 5},
	{id = "editor", label = "Editor", yPos = 32},
	{id = "library", label = "Library", yPos = 59},
	{id = "automation", label = "Auto", yPos = 86},
	{id = "settings", label = "Settings", yPos = 113}
}

local function updateNavButtons()
	for _, btnData in ipairs(navButtons) do
		local btn = sidebar:FindFirstChild(btnData.id .. "Btn")
		if btn then
			if btnData.id == activeTab then
				btn.BackgroundColor3 = rgb(147, 51, 234) -- purple-600
				btn.BackgroundTransparency = 0
				btn.TextColor3 = rgb(255, 255, 255)
				local gradient = btn:FindFirstChild("UIGradient")
				if gradient then
					gradient.Enabled = true
				end
			else
				btn.BackgroundColor3 = rgb(51, 65, 85) -- slate-700/50
				btn.BackgroundTransparency = 0.5
				btn.TextColor3 = rgb(148, 163, 184) -- slate-400
				local gradient = btn:FindFirstChild("UIGradient")
				if gradient then
					gradient.Enabled = false
				end
			end
		end
	end
end

for _, btnData in ipairs(navButtons) do
	local navBtn = Instance.new("TextButton")
	navBtn.Name = btnData.id .. "Btn"
	navBtn.Size = UDim2.new(1, -10, 0, 24)
	navBtn.Position = UDim2.new(0, 5, 0, btnData.yPos)
	navBtn.BackgroundColor3 = rgb(51, 65, 85)
	navBtn.BackgroundTransparency = 0.5
	navBtn.Text = btnData.label
	navBtn.Font = Enum.Font.GothamBold
	navBtn.TextSize = 8
	navBtn.TextColor3 = rgb(148, 163, 184)
	navBtn.BorderSizePixel = 0
	navBtn.Parent = sidebar
	
	local btnCorner = Instance.new("UICorner")
	btnCorner.CornerRadius = UDim.new(0, 6)
	btnCorner.Parent = navBtn
	
	local btnGradient = Instance.new("UIGradient")
	btnGradient.Color = ColorSequence.new{
		ColorSequenceKeypoint.new(0, rgb(147, 51, 234)), -- purple-600
		ColorSequenceKeypoint.new(1, rgb(8, 145, 178)) -- cyan-600
	}
	btnGradient.Rotation = 90
	btnGradient.Enabled = false
	btnGradient.Parent = navBtn
	
	navBtn.MouseButton1Click:Connect(function()
		activeTab = btnData.id
		updateNavButtons()
		-- Update content panels
		for _, child in pairs(mainContent:GetChildren()) do
			if child:IsA("Frame") then
				child.Visible = (child.Name == activeTab .. "Panel")
			end
		end
	end)
end

-- Quick Actions (hidden to fit smaller height)
local quickActionsLabel = Instance.new("TextLabel")
quickActionsLabel.Name = "QuickActionsLabel"
quickActionsLabel.Size = UDim2.new(1, -10, 0, 12)
quickActionsLabel.Position = UDim2.new(0, 5, 0, 150)
quickActionsLabel.BackgroundTransparency = 1
quickActionsLabel.Text = "QUICK ACTIONS"
quickActionsLabel.Font = Enum.Font.GothamBold
quickActionsLabel.TextSize = 6
quickActionsLabel.TextColor3 = rgb(100, 116, 139) -- slate-500
quickActionsLabel.TextXAlignment = Enum.TextXAlignment.Left
quickActionsLabel.Visible = false
quickActionsLabel.Parent = sidebar

local calibrateBtn = Instance.new("TextButton")
calibrateBtn.Name = "CalibrateBtn"
calibrateBtn.Size = UDim2.new(1, -10, 0, 22)
calibrateBtn.Position = UDim2.new(0, 5, 0, 168)
calibrateBtn.BackgroundColor3 = rgb(51, 65, 85) -- slate-700/30
calibrateBtn.BackgroundTransparency = 0.7
calibrateBtn.Text = "Calibrate"
calibrateBtn.Font = Enum.Font.Gotham
calibrateBtn.TextSize = 7
calibrateBtn.TextColor3 = rgb(203, 213, 225) -- slate-300
calibrateBtn.BorderSizePixel = 0
calibrateBtn.Visible = false
calibrateBtn.Parent = sidebar

local calibCorner = Instance.new("UICorner")
calibCorner.CornerRadius = UDim.new(0, 5)
calibCorner.Parent = calibrateBtn

local loadUrlBtn = Instance.new("TextButton")
loadUrlBtn.Name = "LoadUrlBtn"
loadUrlBtn.Size = UDim2.new(1, -10, 0, 22)
loadUrlBtn.Position = UDim2.new(0, 5, 0, 196)
loadUrlBtn.BackgroundColor3 = rgb(51, 65, 85) -- slate-700/30
loadUrlBtn.BackgroundTransparency = 0.7
loadUrlBtn.Text = "Load from URL"
loadUrlBtn.Font = Enum.Font.Gotham
loadUrlBtn.TextSize = 7
loadUrlBtn.TextColor3 = rgb(203, 213, 225) -- slate-300
loadUrlBtn.BorderSizePixel = 0
loadUrlBtn.Visible = false
loadUrlBtn.Parent = sidebar

local urlCorner = Instance.new("UICorner")
urlCorner.CornerRadius = UDim.new(0, 5)
urlCorner.Parent = loadUrlBtn

-- Main Content Area
mainContent = Instance.new("Frame")
mainContent.Name = "MainContent"
mainContent.Size = UDim2.new(0, 295, 0, 258) -- Increased to fit new container
mainContent.Position = UDim2.new(0, 100, 0, 42) -- Moved up from 82
mainContent.BackgroundColor3 = rgb(15, 23, 42) -- slate-900/40
mainContent.BackgroundTransparency = 0.4 -- Less transparent to show purple gradient
mainContent.BorderSizePixel = 0
mainContent.Parent = container

local contentCorner = Instance.new("UICorner")
contentCorner.CornerRadius = UDim.new(0, 8)
contentCorner.Parent = mainContent

local contentStroke = Instance.new("UIStroke")
contentStroke.Color = rgb(51, 65, 85) -- slate-700/50
contentStroke.Transparency = 0.5
contentStroke.Thickness = 1
contentStroke.Parent = mainContent

-- Control Panel
local controlPanel = Instance.new("Frame")
controlPanel.Name = "controlPanel"
controlPanel.Size = UDim2.new(1, 0, 1, 0)
controlPanel.BackgroundTransparency = 1
controlPanel.Visible = true
controlPanel.Parent = mainContent

local controlTitle = Instance.new("TextLabel")
controlTitle.Name = "ControlTitle"
controlTitle.Size = UDim2.new(1, -10, 0, 18)
controlTitle.Position = UDim2.new(0, 5, 0, 5)
controlTitle.BackgroundTransparency = 1
controlTitle.Text = "Control Center"
controlTitle.Font = Enum.Font.GothamBold
controlTitle.TextSize = 11
controlTitle.TextColor3 = rgb(255, 255, 255)
controlTitle.TextXAlignment = Enum.TextXAlignment.Left
controlTitle.Parent = controlPanel

-- Record Button
local recordBtn = Instance.new("TextButton")
recordBtn.Name = "RecordBtn"
recordBtn.Size = UDim2.new(0, 138, 0, 45) -- Increased from 32
recordBtn.Position = UDim2.new(0, 5, 0, 28)
recordBtn.BackgroundColor3 = rgb(239, 68, 68) -- red-500/20
recordBtn.BackgroundTransparency = 0.8
recordBtn.Text = "RECORD"
recordBtn.Font = Enum.Font.GothamBold
recordBtn.TextSize = 9
recordBtn.TextColor3 = rgb(252, 165, 165) -- red-300
recordBtn.BorderSizePixel = 0
recordBtn.Parent = controlPanel

local recordCorner = Instance.new("UICorner")
recordCorner.CornerRadius = UDim.new(0, 8)
recordCorner.Parent = recordBtn

local recordStroke = Instance.new("UIStroke")
recordStroke.Color = rgb(239, 68, 68) -- red-500/50
recordStroke.Transparency = 0.5
recordStroke.Thickness = 1
recordStroke.Parent = recordBtn

-- Play Button
local playBtn = Instance.new("TextButton")
playBtn.Name = "PlayBtn"
playBtn.Size = UDim2.new(0, 138, 0, 45) -- Increased from 32
playBtn.Position = UDim2.new(0, 152, 0, 28)
playBtn.BackgroundColor3 = rgb(34, 197, 94) -- green-500/20
playBtn.BackgroundTransparency = 0.8
playBtn.Text = "PLAY"
playBtn.Font = Enum.Font.GothamBold
playBtn.TextSize = 9
playBtn.TextColor3 = rgb(134, 239, 172) -- green-300
playBtn.BorderSizePixel = 0
playBtn.Parent = controlPanel

local playCorner = Instance.new("UICorner")
playCorner.CornerRadius = UDim.new(0, 8)
playCorner.Parent = playBtn

local playStroke = Instance.new("UIStroke")
playStroke.Color = rgb(34, 197, 94) -- green-500/50
playStroke.Transparency = 0.5
playStroke.Thickness = 1
playStroke.Parent = playBtn

-- Speed Control Label
local speedLabel = Instance.new("TextLabel")
speedLabel.Name = "SpeedLabel"
speedLabel.Size = UDim2.new(1, -10, 0, 12)
speedLabel.Position = UDim2.new(0, 5, 0, 80)
speedLabel.BackgroundTransparency = 1
speedLabel.Text = "Playback Speed"
speedLabel.Font = Enum.Font.GothamBold
speedLabel.TextSize = 8
speedLabel.TextColor3 = rgb(203, 213, 225) -- slate-300
speedLabel.TextXAlignment = Enum.TextXAlignment.Left
speedLabel.Parent = controlPanel

-- Speed buttons
local speeds = {"0.5x", "1.0x", "1.5x", "2.0x"}
for i, speed in ipairs(speeds) do
	local speedBtn = Instance.new("TextButton")
	speedBtn.Name = "Speed" .. speed
	speedBtn.Size = UDim2.new(0, 68, 0, 24)
	speedBtn.Position = UDim2.new(0, 5 + (i-1) * 73, 0, 95)
	if speed == "1.0x" then
		speedBtn.BackgroundColor3 = rgb(147, 51, 234) -- purple-600
		speedBtn.BackgroundTransparency = 0
		speedBtn.TextColor3 = rgb(255, 255, 255)
	else
		speedBtn.BackgroundColor3 = rgb(51, 65, 85) -- slate-700/30
		speedBtn.BackgroundTransparency = 0.7
		speedBtn.TextColor3 = rgb(203, 213, 225) -- slate-300
	end
	speedBtn.Text = speed
	speedBtn.Font = Enum.Font.GothamBold
	speedBtn.TextSize = 9
	speedBtn.BorderSizePixel = 0
	speedBtn.Parent = controlPanel
	
	local speedCorner = Instance.new("UICorner")
	speedCorner.CornerRadius = UDim.new(0, 6)
	speedCorner.Parent = speedBtn
	
	if speed == "1.0x" then
		local speedGradient = Instance.new("UIGradient")
		speedGradient.Color = ColorSequence.new{
			ColorSequenceKeypoint.new(0, rgb(147, 51, 234)), -- purple-600
			ColorSequenceKeypoint.new(1, rgb(8, 145, 178)) -- cyan-600
		}
		speedGradient.Rotation = 135
		speedGradient.Parent = speedBtn
	else
		local speedStroke = Instance.new("UIStroke")
		speedStroke.Color = rgb(71, 85, 105) -- slate-600/50
		speedStroke.Transparency = 0.5
		speedStroke.Thickness = 1
		speedStroke.Parent = speedBtn
	end
end

-- Save/Load buttons
local saveBtn = Instance.new("TextButton")
saveBtn.Name = "SaveBtn"
saveBtn.Size = UDim2.new(0, 138, 0, 28) -- Increased from 22
saveBtn.Position = UDim2.new(0, 5, 0, 125) -- Adjusted position
saveBtn.BackgroundColor3 = rgb(51, 65, 85) -- slate-700/30
saveBtn.BackgroundTransparency = 0.7
saveBtn.Text = "Save"
saveBtn.Font = Enum.Font.GothamBold
saveBtn.TextSize = 9
saveBtn.TextColor3 = rgb(226, 232, 240) -- slate-200
saveBtn.BorderSizePixel = 0
saveBtn.Parent = controlPanel

local saveCorner = Instance.new("UICorner")
saveCorner.CornerRadius = UDim.new(0, 6)
saveCorner.Parent = saveBtn

local saveStroke = Instance.new("UIStroke")
saveStroke.Color = rgb(71, 85, 105) -- slate-600/50
saveStroke.Transparency = 0.5
saveStroke.Thickness = 1
saveStroke.Parent = saveBtn

local loadBtn = Instance.new("TextButton")
loadBtn.Name = "LoadBtn"
loadBtn.Size = UDim2.new(0, 138, 0, 28) -- Increased from 22
loadBtn.Position = UDim2.new(0, 152, 0, 125) -- Adjusted position
loadBtn.BackgroundColor3 = rgb(51, 65, 85) -- slate-700/30
loadBtn.BackgroundTransparency = 0.7
loadBtn.Text = "Load"
loadBtn.Font = Enum.Font.GothamBold
loadBtn.TextSize = 9
loadBtn.TextColor3 = rgb(226, 232, 240) -- slate-200
loadBtn.BorderSizePixel = 0
loadBtn.Parent = controlPanel

local loadCorner = Instance.new("UICorner")
loadCorner.CornerRadius = UDim.new(0, 6)
loadCorner.Parent = loadBtn

local loadStroke = Instance.new("UIStroke")
loadStroke.Color = rgb(71, 85, 105) -- slate-600/50
loadStroke.Transparency = 0.5
loadStroke.Thickness = 1
loadStroke.Parent = loadBtn

-- Advanced Options
local advancedBox = Instance.new("Frame")
advancedBox.Name = "AdvancedBox"
advancedBox.Size = UDim2.new(1, -10, 0, 85) -- Slightly increased
advancedBox.Position = UDim2.new(0, 5, 0, 165) -- Better position
advancedBox.BackgroundColor3 = rgb(30, 41, 59) -- slate-800/30
advancedBox.BackgroundTransparency = 0.7
advancedBox.BorderSizePixel = 0
advancedBox.Parent = controlPanel

local advCorner = Instance.new("UICorner")
advCorner.CornerRadius = UDim.new(0, 6)
advCorner.Parent = advancedBox

local advStroke = Instance.new("UIStroke")
advStroke.Color = rgb(51, 65, 85) -- slate-700/50
advStroke.Transparency = 0.5
advStroke.Thickness = 1
advStroke.Parent = advancedBox

local advLabel = Instance.new("TextLabel")
advLabel.Name = "AdvLabel"
advLabel.Size = UDim2.new(1, -10, 0, 12)
advLabel.Position = UDim2.new(0, 5, 0, 3)
advLabel.BackgroundTransparency = 1
advLabel.Text = "ADVANCED OPTIONS"
advLabel.Font = Enum.Font.GothamBold
advLabel.TextSize = 7
advLabel.TextColor3 = rgb(148, 163, 184) -- slate-400
advLabel.TextXAlignment = Enum.TextXAlignment.Left
advLabel.Parent = advancedBox

-- Toggle switches (all 3 now fit)
local toggles = {"Loop Playback", "Click Recovery", "3D Path Visualization"}
for i, toggleName in ipairs(toggles) do
	local toggleLabel = Instance.new("TextLabel")
	toggleLabel.Name = toggleName:gsub(" ", "")
	toggleLabel.Size = UDim2.new(1, -40, 0, 14)
	toggleLabel.Position = UDim2.new(0, 5, 0, 18 + (i-1) * 22)
	toggleLabel.BackgroundTransparency = 1
	toggleLabel.Text = toggleName
	toggleLabel.Font = Enum.Font.Gotham
	toggleLabel.TextSize = 8
	toggleLabel.TextColor3 = rgb(203, 213, 225) -- slate-300
	toggleLabel.TextXAlignment = Enum.TextXAlignment.Left
	toggleLabel.Parent = advancedBox
	
	local toggleSwitch = Instance.new("Frame")
	toggleSwitch.Name = toggleName:gsub(" ", "") .. "Switch"
	toggleSwitch.Size = UDim2.new(0, 28, 0, 14)
	toggleSwitch.Position = UDim2.new(1, -33, 0, 18 + (i-1) * 22)
	toggleSwitch.BackgroundColor3 = rgb(51, 65, 85) -- slate-700
	if i == 2 then
		toggleSwitch.BackgroundColor3 = rgb(147, 51, 234) -- purple-600
	end
	toggleSwitch.BorderSizePixel = 0
	toggleSwitch.Parent = advancedBox
	
	local switchCorner = Instance.new("UICorner")
	switchCorner.CornerRadius = UDim.new(1, 0)
	switchCorner.Parent = toggleSwitch
	
	if i == 2 then
		local switchGradient = Instance.new("UIGradient")
		switchGradient.Color = ColorSequence.new{
			ColorSequenceKeypoint.new(0, rgb(147, 51, 234)), -- purple-600
			ColorSequenceKeypoint.new(1, rgb(8, 145, 178)) -- cyan-600
		}
		switchGradient.Rotation = 90
		switchGradient.Parent = toggleSwitch
	end
	
	local switchKnob = Instance.new("Frame")
	switchKnob.Name = "Knob"
	switchKnob.Size = UDim2.new(0, 12, 0, 12)
	if i == 2 then
		switchKnob.Position = UDim2.new(0, 15, 0, 1)
	else
		switchKnob.Position = UDim2.new(0, 1, 0, 1)
	end
	switchKnob.BackgroundColor3 = rgb(255, 255, 255)
	switchKnob.BorderSizePixel = 0
	switchKnob.Parent = toggleSwitch
	
	local knobCorner = Instance.new("UICorner")
	knobCorner.CornerRadius = UDim.new(1, 0)
	knobCorner.Parent = switchKnob
end

-- Other panels (simplified)
local editorPanel = Instance.new("Frame")
editorPanel.Name = "editorPanel"
editorPanel.Size = UDim2.new(1, 0, 1, 0)
editorPanel.BackgroundTransparency = 1
editorPanel.Visible = false
editorPanel.Parent = mainContent

local editorTitle = Instance.new("TextLabel")
editorTitle.Size = UDim2.new(1, -10, 0, 18)
editorTitle.Position = UDim2.new(0, 5, 0, 5)
editorTitle.BackgroundTransparency = 1
editorTitle.Text = "Macro Editor"
editorTitle.Font = Enum.Font.GothamBold
editorTitle.TextSize = 11
editorTitle.TextColor3 = rgb(255, 255, 255)
editorTitle.TextXAlignment = Enum.TextXAlignment.Left
editorTitle.Parent = editorPanel

local editorPlaceholder = Instance.new("Frame")
editorPlaceholder.Size = UDim2.new(1, -10, 0, 200)
editorPlaceholder.Position = UDim2.new(0, 5, 0, 30)
editorPlaceholder.BackgroundColor3 = rgb(30, 41, 59) -- slate-800/50
editorPlaceholder.BackgroundTransparency = 0.5
editorPlaceholder.BorderSizePixel = 0
editorPlaceholder.Parent = editorPanel

local editorCorner = Instance.new("UICorner")
editorCorner.CornerRadius = UDim.new(0, 6)
editorCorner.Parent = editorPlaceholder

local editorStroke = Instance.new("UIStroke")
editorStroke.Color = rgb(51, 65, 85) -- slate-700/50
editorStroke.Transparency = 0.5
editorStroke.Thickness = 1
editorStroke.Parent = editorPlaceholder

local editorText = Instance.new("TextLabel")
editorText.Size = UDim2.new(1, 0, 1, 0)
editorText.BackgroundTransparency = 1
editorText.Text = "Node editor interface here"
editorText.Font = Enum.Font.Gotham
editorText.TextSize = 10
editorText.TextColor3 = rgb(148, 163, 184) -- slate-400
editorText.Parent = editorPlaceholder

-- Library Panel
local libraryPanel = Instance.new("Frame")
libraryPanel.Name = "libraryPanel"
libraryPanel.Size = UDim2.new(1, 0, 1, 0)
libraryPanel.BackgroundTransparency = 1
libraryPanel.Visible = false
libraryPanel.Parent = mainContent

local libraryTitle = Instance.new("TextLabel")
libraryTitle.Size = UDim2.new(1, -10, 0, 18)
libraryTitle.Position = UDim2.new(0, 5, 0, 5)
libraryTitle.BackgroundTransparency = 1
libraryTitle.Text = "Macro Library"
libraryTitle.Font = Enum.Font.GothamBold
libraryTitle.TextSize = 11
libraryTitle.TextColor3 = rgb(255, 255, 255)
libraryTitle.TextXAlignment = Enum.TextXAlignment.Left
libraryTitle.Parent = libraryPanel

local macros = {"Farming Route", "PvP Combo", "Auto Craft", "Boss Fight"}
for i, macroName in ipairs(macros) do
	local row = math.floor((i-1) / 2)
	local col = (i-1) % 2
	
	local macroCard = Instance.new("Frame")
	macroCard.Name = macroName:gsub(" ", "")
	macroCard.Size = UDim2.new(0, 138, 0, 55) -- Slightly reduced height
	macroCard.Position = UDim2.new(0, 5 + col * 147, 0, 28 + row * 65) -- Better spacing
	macroCard.BackgroundColor3 = rgb(30, 41, 59) -- slate-800/30
	macroCard.BackgroundTransparency = 0.7
	macroCard.BorderSizePixel = 0
	macroCard.Parent = libraryPanel
	
	local macroCorner = Instance.new("UICorner")
	macroCorner.CornerRadius = UDim.new(0, 6)
	macroCorner.Parent = macroCard
	
	local macroStroke = Instance.new("UIStroke")
	macroStroke.Color = rgb(51, 65, 85) -- slate-700/50
	macroStroke.Transparency = 0.5
	macroStroke.Thickness = 1
	macroStroke.Parent = macroCard
	
	local macroTitle = Instance.new("TextLabel")
	macroTitle.Size = UDim2.new(1, -10, 0, 16)
	macroTitle.Position = UDim2.new(0, 5, 0, 32)
	macroTitle.BackgroundTransparency = 1
	macroTitle.Text = macroName
	macroTitle.Font = Enum.Font.GothamBold
	macroTitle.TextSize = 9
	macroTitle.TextColor3 = rgb(255, 255, 255)
	macroTitle.TextXAlignment = Enum.TextXAlignment.Left
	macroTitle.Parent = macroCard
	
	local macroInfo = Instance.new("TextLabel")
	macroInfo.Size = UDim2.new(1, -10, 0, 10)
	macroInfo.Position = UDim2.new(0, 5, 0, 46)
	macroInfo.BackgroundTransparency = 1
	macroInfo.Text = "Last modified: 2h ago"
	macroInfo.Font = Enum.Font.Gotham
	macroInfo.TextSize = 7
	macroInfo.TextColor3 = rgb(148, 163, 184) -- slate-400
	macroInfo.TextXAlignment = Enum.TextXAlignment.Left
	macroInfo.Parent = macroCard
end

-- Automation Panel
local automationPanel = Instance.new("Frame")
automationPanel.Name = "automationPanel"
automationPanel.Size = UDim2.new(1, 0, 1, 0)
automationPanel.BackgroundTransparency = 1
automationPanel.Visible = false
automationPanel.Parent = mainContent

local autoTitle = Instance.new("TextLabel")
autoTitle.Size = UDim2.new(0, 180, 0, 18)
autoTitle.Position = UDim2.new(0, 5, 0, 5)
autoTitle.BackgroundTransparency = 1
autoTitle.Text = "Automation Rules"
autoTitle.Font = Enum.Font.GothamBold
autoTitle.TextSize = 11
autoTitle.TextColor3 = rgb(255, 255, 255)
autoTitle.TextXAlignment = Enum.TextXAlignment.Left
autoTitle.Parent = automationPanel

local newRuleBtn = Instance.new("TextButton")
newRuleBtn.Size = UDim2.new(0, 70, 0, 22)
newRuleBtn.Position = UDim2.new(1, -75, 0, 5)
newRuleBtn.BackgroundColor3 = rgb(147, 51, 234) -- purple-600
newRuleBtn.Text = "+ New Rule"
newRuleBtn.Font = Enum.Font.GothamBold
newRuleBtn.TextSize = 8
newRuleBtn.TextColor3 = rgb(255, 255, 255)
newRuleBtn.BorderSizePixel = 0
newRuleBtn.Parent = automationPanel

local newRuleCorner = Instance.new("UICorner")
newRuleCorner.CornerRadius = UDim.new(0, 5)
newRuleCorner.Parent = newRuleBtn

local newRuleGradient = Instance.new("UIGradient")
newRuleGradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, rgb(147, 51, 234)), -- purple-600
	ColorSequenceKeypoint.new(1, rgb(8, 145, 178)) -- cyan-600
}
newRuleGradient.Rotation = 90
newRuleGradient.Parent = newRuleBtn

-- Settings Panel
local settingsPanel = Instance.new("Frame")
settingsPanel.Name = "settingsPanel"
settingsPanel.Size = UDim2.new(1, 0, 1, 0)
settingsPanel.BackgroundTransparency = 1
settingsPanel.Visible = false
settingsPanel.Parent = mainContent

local settingsTitle = Instance.new("TextLabel")
settingsTitle.Size = UDim2.new(1, -10, 0, 18)
settingsTitle.Position = UDim2.new(0, 5, 0, 5)
settingsTitle.BackgroundTransparency = 1
settingsTitle.Text = "Settings"
settingsTitle.Font = Enum.Font.GothamBold
settingsTitle.TextSize = 11
settingsTitle.TextColor3 = rgb(255, 255, 255)
settingsTitle.TextXAlignment = Enum.TextXAlignment.Left
settingsTitle.Parent = settingsPanel

-- Footer
local footer = Instance.new("TextLabel")
footer.Name = "Footer"
footer.Size = UDim2.new(1, 0, 0, 16)
footer.Position = UDim2.new(0, 0, 1, -20)
footer.BackgroundTransparency = 1
footer.Text = "Axiora v6.0 • Idle • Uptime: 2h 47m"
footer.Font = Enum.Font.Code
footer.TextSize = 7
footer.TextColor3 = rgb(100, 116, 139) -- slate-500
footer.Parent = container

-- Button Functionality
local function updateStatus()
	if isRecording then
		statusText.Text = "RECORDING"
		statusIndicator.BackgroundColor3 = rgb(239, 68, 68) -- red-500/20
		statusIndicator.BackgroundTransparency = 0.8
		statusDot.BackgroundColor3 = rgb(248, 113, 113) -- red-400
		local dotPulse = TweenService:Create(statusDot, TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true), {BackgroundTransparency = 0.5})
		dotPulse:Play()
		local indStroke = statusIndicator:FindFirstChild("UIStroke")
		if indStroke then
			indStroke.Color = rgb(239, 68, 68) -- red-500/50
		end
	elseif isPlaying then
		statusText.Text = "PLAYING"
		statusIndicator.BackgroundColor3 = rgb(34, 197, 94) -- green-500/20
		statusIndicator.BackgroundTransparency = 0.8
		statusDot.BackgroundColor3 = rgb(74, 222, 128) -- green-400
		local dotPulse = TweenService:Create(statusDot, TweenInfo.new(1, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true), {BackgroundTransparency = 0.5})
		dotPulse:Play()
		local indStroke = statusIndicator:FindFirstChild("UIStroke")
		if indStroke then
			indStroke.Color = rgb(34, 197, 94) -- green-500/50
		end
	else
		statusText.Text = "IDLE"
		statusIndicator.BackgroundColor3 = rgb(51, 65, 85) -- slate-700/30
		statusIndicator.BackgroundTransparency = 0.7
		statusDot.BackgroundColor3 = rgb(148, 163, 184) -- slate-400
		statusDot.BackgroundTransparency = 0
		local indStroke = statusIndicator:FindFirstChild("UIStroke")
		if indStroke then
			indStroke.Color = rgb(71, 85, 105) -- slate-600/50
		end
	end
end

recordBtn.MouseButton1Click:Connect(function()
	isRecording = not isRecording
	if isRecording then
		isPlaying = false
		recordBtn.Text = "STOP REC"
		recordBtn.BackgroundColor3 = rgb(220, 38, 38) -- red-600
		recordBtn.BackgroundTransparency = 0
	else
		recordBtn.Text = "RECORD"
		recordBtn.BackgroundColor3 = rgb(239, 68, 68) -- red-500/20
		recordBtn.BackgroundTransparency = 0.8
	end
	updateStatus()
end)

playBtn.MouseButton1Click:Connect(function()
	isPlaying = not isPlaying
	if isPlaying then
		isRecording = false
		recordBtn.Text = "RECORD"
		recordBtn.BackgroundColor3 = rgb(239, 68, 68) -- red-500/20
		recordBtn.BackgroundTransparency = 0.8
		playBtn.Text = "STOP"
		playBtn.BackgroundColor3 = rgb(21, 128, 61) -- green-600
		playBtn.BackgroundTransparency = 0
	else
		playBtn.Text = "PLAY"
		playBtn.BackgroundColor3 = rgb(34, 197, 94) -- green-500/20
		playBtn.BackgroundTransparency = 0.8
	end
	updateStatus()
end)

-- Initialize
updateNavButtons()
updateStatus()

-- Toggle Button (improved design)
local toggleButton = Instance.new("TextButton")
toggleButton.Name = "ToggleButton"
toggleButton.Size = UDim2.new(0, 50, 0, 50)
toggleButton.Position = UDim2.new(0, 10, 0, 10)
toggleButton.BackgroundColor3 = rgb(15, 23, 42) -- slate-900
toggleButton.BackgroundTransparency = 0.3
toggleButton.Text = "✕"
toggleButton.Font = Enum.Font.GothamBold
toggleButton.TextSize = 24
toggleButton.TextColor3 = rgb(167, 139, 250) -- purple-400
toggleButton.BorderSizePixel = 0
toggleButton.Parent = screenGui

local toggleCorner = Instance.new("UICorner")
toggleCorner.CornerRadius = UDim.new(0, 12)
toggleCorner.Parent = toggleButton

-- Toggle button border glow
local toggleStroke = Instance.new("UIStroke")
toggleStroke.Color = rgb(168, 85, 247) -- purple-500
toggleStroke.Transparency = 0.3
toggleStroke.Thickness = 2
toggleStroke.Parent = toggleButton

local toggleGradient = Instance.new("UIGradient")
toggleGradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, rgb(2, 6, 23)), -- slate-950
	ColorSequenceKeypoint.new(0.5, rgb(59, 7, 100)), -- purple-950
	ColorSequenceKeypoint.new(1, rgb(2, 6, 23)) -- slate-950
}
toggleGradient.Rotation = 135
toggleGradient.Parent = toggleButton

-- Toggle button functionality
local isGuiVisible = true
toggleButton.MouseButton1Click:Connect(function()
	isGuiVisible = not isGuiVisible
	container.Visible = isGuiVisible
	if isGuiVisible then
		toggleButton.Text = "✕"
		toggleButton.TextSize = 24
	else
		toggleButton.Text = "☰"
		toggleButton.TextSize = 20
	end
end)

-- Make GUI Draggable (using status bar since header is hidden)
local dragging = false
local dragInput
local dragStart
local startPos

local function update(input)
	local delta = input.Position - dragStart
	container.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

statusBar.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
		dragging = true
		dragStart = input.Position
		startPos = container.Position
		
		input.Changed:Connect(function()
			if input.UserInputState == Enum.UserInputState.End then
				dragging = false
			end
		end)
	end
end)

statusBar.InputChanged:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
		dragInput = input
	end
end)

game:GetService("UserInputService").InputChanged:Connect(function(input)
	if input == dragInput and dragging then
		update(input)
	end
end)

print("Axiora Modern GUI loaded successfully!")
